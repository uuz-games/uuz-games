window.__require=function t(e,o,n){function r(i,c){if(!o[i]){if(!e[i]){var s=i.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var u=o[i]={exports:{}};e[i][0].call(u.exports,function(t){return r(e[i][1][t]||t)},u,u.exports,t,e,o,n)}return o[i].exports}for(var a="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({ADManager:[function(t,e,o){"use strict";cc._RF.push(e,"f51d2PraFZMcL9UPCabJgSw","ADManager");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Data/Constants"),a=cc._decorator,i=a.ccclass,c=(a.property,function(){function t(){this.finishCall=null,this.errorCall=null,this.recorder=null,this._videoPath=null,this.shareVideoCall=null,this.tablePlaqueAdCom=null}var e;return e=t,t.instance=function(){return this._instance||(this._instance=new e),this._instance},t.prototype.VideoAd=function(t,e){var o=this;if(t&&(this.finishCall=t),e&&(this.errorCall=e),r.default.buildType!==r.BuildType.Test)switch(r.default.buildType){case r.BuildType.WEB:adBreak({type:"reward",name:"dasdf",beforeReward:function(t){console.log("beforeReward--"),t()},adDismissed:function(){console.log("\u6ca1\u6709\u770b\u5b8c\u5e7f\u544a\u4e0d\u53d1\u653e\u5956\u52b1"),o.errorVideo()},adViewed:function(){console.log("\u5e7f\u544a\u64ad\u653e\u5b8c\u6bd5\u53d1\u653e\u5956\u52b1"),o.finishVideo()},adBreakDone:function(){console.log("placementInfo"),o.finishVideo()}});break;case r.BuildType.ZJ:var n=tt.createRewardedVideoAd({adUnitId:""});n.onLoad(function(){console.log("\u5e7f\u544a\u52a0\u8f7d\u5b8c\u6210")}),n.load(),n.show().then(function(){console.log("\u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(t){o.finishVideo(),console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t)}),n.onClose(function(t){t.isEnded?(console.log("\u83b7\u53d6\u5956\u52b1"),o.finishVideo()):(console.log("\u6ca1\u6709\u89c2\u770b\u5b8c\u6bd5--"),o.errorVideo()),t.count})}else this.finishVideo()},t.prototype.finishVideo=function(){this.finishCall&&(this.finishCall(),this.finishCall=null),this.errorCall=null},t.prototype.errorVideo=function(){this.errorCall&&(this.errorCall(),this.errorCall=null),this.finishCall=null},t.prototype.createTablePlaqueAd=function(){if(r.default.buildType!==r.BuildType.Test)switch(r.default.buildType){case r.BuildType.WEB:adBreak({type:"next",name:"dasdf"});break;case r.BuildType.ZJ:var t=tt.createInterstitialAd({adUnitId:""});t.load().then(function(){t.show().then(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u6210\u529f")})}).catch(function(t){console.log("\u63d2\u5c4f\u5e7f\u544a\u5931\u8d25"),console.log(t)}),this.tablePlaqueAdCom=t}},t.prototype.createVideoScreen=function(){r.default.buildType==r.BuildType.ZJ&&(this.recorder=tt.getGameRecorderManager(),this.recorder.onStart(function(){}),this.recorder.onError(function(t){console.log("\u5f55\u5c4f\u9519\u8bef",t)}),this.recorder.start({duration:300}))},t.prototype.stopVideoScreen=function(){if(r.default.buildType==r.BuildType.ZJ){var t=this;console.log("stopvideo"),this.recorder.onStop(function(e){t._videoPath=e.videoPath}),this.recorder.stop()}},t.prototype.shareScreenVideo=function(t){if(r.default.buildType==r.BuildType.ZJ){t&&(this.shareVideoCall=t);var e=this;tt.shareAppMessage({channel:"video",title:"666666666666~",imageUrl:"",query:"",extra:{videoPath:e._videoPath,videoTopics:["\u6765\u4e2a\u5305\u5b50"]},success:function(){e.shareVideoCall&&e.shareVideoCall(),e.shareVideoCall=null},fail:function(t){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25"),console.log(t)}})}},t._instance=null,e=n([i],t)}());o.default=c,cc._RF.pop()},{"../Data/Constants":"Constants"}],AStar:[function(t,e,o){"use strict";cc._RF.push(e,"cdef4cl4k9HZaA2VW/msDf7","AStar"),Object.defineProperty(o,"__esModule",{value:!0}),o.AStar=void 0,o.AStar={_mapW:0,_mapH:0,cubeArr:null,pathArr:[],openArr:[],closeArr:[],generatePath:function(t){for(this.pathArr.push(t);t._P;)t=t._P,this.pathArr.push(t);this.pathArr.reverse()},findPath:function(t,e){this.pathArr=[],this.openArr=[],this.closeArr=[];for(var o=0;o<this._mapW;o++)for(var n=0;n<this._mapH;n++)this.cubeArr[o][n]._F=0,this.cubeArr[o][n]._G=0,this.cubeArr[o][n]._H=0,this.cubeArr[o][n]._P=null;this.openArr.push(t);for(var r=this.openArr[0];this.openArr.length>0&&r!==e;){if((r=this.openArr[0])===e)return cc.log("Find path success."),this.generatePath(r),this.pathArr;for(o=-1;o<=1;o++)for(n=-1;n<=1;n++)if(0!=o||0!=n){var a=r._col+o,i=r._row+n;if(a>=0&&i>=0&&a<this._mapW&&i<this._mapH&&0==this.cubeArr[a][i].type&&this.closeArr.indexOf(this.cubeArr[a][i])<0){if(Math.abs(o)==Math.abs(n))continue;var c=r._G+Math.sqrt(Math.pow(10*o,2)+Math.pow(10*n,2));(0==this.cubeArr[a][i]._G||this.cubeArr[a][i]._G>c)&&(this.cubeArr[a][i]._G=c,this.cubeArr[a][i]._P=r),this.cubeArr[a][i]._H=Math.abs(e._col-a)+Math.abs(e._row-i),this.cubeArr[a][i]._F=this.cubeArr[a][i]._G+this.cubeArr[a][i]._H,this.openArr.indexOf(this.cubeArr[a][i])<0&&this.openArr.push(this.cubeArr[a][i])}}this.closeArr.push(r),this.openArr.splice(this.openArr.indexOf(r),1),this.openArr.length<=0&&cc.log("Find path failed."),this.openArr.sort(this._sortFunc)}},_sortFunc:function(t,e){return t.f-e.f}},cc._RF.pop()},{}],ArraySort:[function(t,e,o){"use strict";cc._RF.push(e,"b473cnJO2xDa4Kun4n6+60a","ArraySort");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function t(){}return t.BubbleSort=function(t,e){void 0===e&&(e=!0);var o,n=t.length;if(n<=1)return t;for(var r=0;r<n;r++){for(var a=!1,i=0;i<n-r-1;i++)(e?t[i]>t[i+1]:t[i]<t[i+1])&&(o=t[i],t[i]=t[i+1],t[i+1]=o,a=!0);if(!a)break}return t},t.SelectSort=function(t,e){void 0===e&&(e=!0);var o,n=t.length;if(n<=1)return t;for(var r=0;r<n-1;r++){for(var a=r,i=r+1;i<n;i++)(e?t[i]<t[a]:t[i]>t[a])&&(a=i);a!=r&&(o=t[a],t[a]=t[r],t[r]=o)}return t},t.InsertSort=function(t,e){void 0===e&&(e=!0);var o,n=t.length;if(n<=1)return t;for(var r=0;r<n-1;r++)for(var a=r+1;a>=0&&(e?t[a]<t[a-1]:t[a]>t[a-1]);a--)o=t[a-1],t[a-1]=t[a],t[a]=o;return t},t.QuickSort=function(t,e,o,n){if(void 0===n&&(n=!0),t.length<=1||e>=o)return t;for(var r=t[e],a=e,i=o;a<i;){for(;a<i&&(n?t[i]>=r:t[i]<r);)i--;for(a<i&&(t[a++]=t[i]);a<i&&(n?t[a]<r:t[a]>=r);)a++;a<i&&(t[i--]=t[a])}return t[a]=r,this.QuickSort(t,e,a-1,n),this.QuickSort(t,i+1,o,n),t},t.MergeSort=function(t,e){void 0===e&&(e=!0);var o=t.length;if(o<=1)return t;for(var n=new Array(o),r=1;r<2*o;r*=2){for(var a=0;a<o;a+=2*r){for(var i=a,c=a+r<o?a+r:o,s=i,l=c,u=c,p=a+2*r<o?a+2*r:o;s<l&&u<p;)n[i++]=e?t[s]<t[u]?t[s++]:t[u++]:t[s]>t[u]?t[s++]:t[u++];for(;s<l;)n[i++]=t[s++];for(;u<p;)n[i++]=t[u++]}var f=t;t=n,n=f}n=t},n([a("ArraySort")],t)}());o.default=i,cc._RF.pop()},{}],ArrayTools:[function(t,e,o){"use strict";cc._RF.push(e,"d3225I92GxB0Iv3ckXHuR4W","ArrayTools");var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var a=arguments[e],i=0,c=a.length;i<c;i++,r++)n[r]=a[i];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.ArrayTools=void 0,o.ArrayTools={removeDuplicates:function(t){var e=t.length;if(0===e)return 0;for(var o=1,n=1;o<e;)t[o]!==t[o-1]&&(t[n]=t[o],++n),++o;return n},indexOfArrayVec2:function(t,e){if(0===e.length)return-1;for(var o=0;o<e.length;o++)if(e[o].x===t.x&&e[o].y===t.y)return o;return-1},isArray:function(t){return t.constructor.toString().indexOf("Array")>-1},rotate:function(t,e){var o=t.length;0!==o&&0!==e&&1!==o&&(e%=o,t.reverse(),this.reverse(t,0,e-1),this.reverse(t,e,o-1))},reverse:function(t,e,o){for(;e<o;){var n=t[e];t[e++]=t[o],t[o--]=n}},intersect:function(t,e){t.sort(function(t,e){return t-e}),e.sort(function(t,e){return t-e});for(var o=[],n=0,r=0;n<t.length&&r<e.length;)t[n]==e[r]?(o.push(t[n]),n++,r++):t[n]>e[r]?r++:n++;return o},intersectMap:function(t,e){for(var o={},n=[],r=0,a=t;r<a.length;r++){var i=a[r];o[i]?o[i]++:o[i]=1}for(var c=0,s=e;c<s.length;c++){var l=s[c];o[l]>0&&(n.push(l),o[l]--)}return n},plusOne:function(t){for(var e=t.length-1;e>-1;e--)if(t[e]++,t[e]%=10,0!=t[e])return t;return n([1],t)},moveZeroes:function(t){if(null!=t&&0!=t.length){for(var e=0,o=0;o<t.length;o++)0!=t[o]&&(t[e++]=t[o]);for(;e<t.length;)t[e++]=0}},twoSum:function(t,e){var o=new Map,n=[];t.map(function(t,e){o.set(t,e)});for(var r=0;r<t.length-1;r++)if(o.has(e-t[r])&&o.get(e-t[r])!=r)return n.push(r,o.get(e-t[r])),n},isValidSudoku:function(t){for(var e=new Array(9).fill(null).map(function(){return new Set}),o=new Array(9).fill(null).map(function(){return new Set}),n=new Array(9).fill(null).map(function(){return new Set}),r=0;r<9;++r)for(var a=0;a<9;++a)if("."!==t[r][a]){var i=t[r][a],c=this.getBlockIndex(r,a);if(o[r].has(i)||e[a].has(i)||n[c].has(i))return!1;o[r].add(i),e[a].add(i),n[c].add(i)}return!0},getBlockIndex:function(t,e){return 3*Math.floor(t/3)+Math.floor(e/3)}},cc._RF.pop()},{}],AudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"c36d0MfbNhHC6a6xX3pf+wW","AudioManager");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Data/GameData"),a=t("./LogManager"),i=cc._decorator,c=i.ccclass,s=(i.property,function(){function t(){}return t.InitMusic=function(t){this.musicHandle={};for(var e=0;e<t.length;e++)this.musicHandle[t[e].name]=t[e]},t.InitSound=function(t){this.soundHandle={};for(var e=0;e<t.length;e++)this.soundHandle[t[e].name]=t[e]},t.playMusic=function(t){if(r.default.Instance.musicSet){var e=this.musicHandle[t];e?cc.audioEngine.playMusic(e,!0):a.default.error("\u4e0d\u5b58\u5728\u8be5\u97f3\u4e50\u8d44\u6e90\uff1a"+t)}},t.pauseMusic=function(){cc.audioEngine.pauseMusic()},t.resumeMusic=function(){cc.audioEngine.resumeMusic()},t.stopMusic=function(){cc.audioEngine.stopMusic()},t.playSound=function(t,e){if(r.default.Instance.musicSet){var o=this.soundHandle[t];o?cc.audioEngine.play(o,!1,e):a.default.error("\u4e0d\u5b58\u5728\u8be5\u97f3\u6548\u8d44\u6e90\uff1a"+t)}},t.musicHandle={},t.soundHandle={},n([c],t)}());o.default=s,cc._RF.pop()},{"../Data/GameData":"GameData","./LogManager":"LogManager"}],Configuration:[function(t,e,o){"use strict";cc._RF.push(e,"8aba4WR13xPvLSAXit4G3m+","Configuration");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Constants"),a=cc._decorator,i=a.ccclass,c=(a.property,function(){function t(){this._jsonData={},this._markSave=!1}var e;return e=t,Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){var t=null;r.default.buildType===r.BuildType.ZJ?(t=tt.getStorageSync(r.default.GameConfigID))&&(this._jsonData=t):(t=cc.sys.localStorage.getItem(r.default.GameConfigID))&&(this._jsonData=JSON.parse(t)),setInterval(this._scheduleSave.bind(this),500)},t.prototype.getConfigData=function(t){return this._jsonData[t]||""},t.prototype.setConfigData=function(t,e){this._jsonData[t]=e,this._markSave=!0},t.prototype._scheduleSave=function(){this._markSave&&(r.default.buildType===r.BuildType.ZJ?tt.setStorageSync(r.default.GameConfigID,this._jsonData):cc.sys.localStorage.setItem(r.default.GameConfigID,JSON.stringify(this._jsonData)),this._markSave=!1)},t._instance=null,e=n([i("Configuration")],t)}());o.default=c,cc._RF.pop()},{"./Constants":"Constants"}],Constants:[function(t,e,o){"use strict";cc._RF.push(e,"efb45Wlk+1Ms6HdB3QJ9rIz","Constants");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.EGameDiff=o.EEnterAnim=o.EPropsType=o.EFoodType=o.GameState=o.AudioSource=o.EventName=o.BuildType=void 0;var r,a,i,c=cc._decorator,s=c.ccclass;c.property,function(t){t[t.Test=0]="Test",t[t.WEB=1]="WEB",t[t.ZJ=2]="ZJ"}(r=o.BuildType||(o.BuildType={})),function(t){t.Scene_To_StartGame="",t.Scene_To_MainGame="",t.MainGame_Init="",t.Game_Start="",t.Game_Success="",t.Game_Over="",t.Use_Props="",t.ModifProps_Props_Num="",t.Money_Change="",t.Show_GoldEffect="",t.Show_AD="",t.Mask_Size_Change="",t.Mask_Show="",t.Mask_Hide="",t.Start_Timing="",t.Clear_Map="",t.GameUI_HideTimingBox=""}(a=o.EventName||(o.EventName={})),o.AudioSource||(o.AudioSource={}),function(t){t.GS_NOTINIT="gs_notinit",t.GS_INIT="gs_init",t.GS_PLAYING="gs_playing",t.GS_PASUE="gs_pause",t.GS_END="gs_end",t.GS_SUCCECC="gs_success",t.GS_OVER="gs_over"}(o.GameState||(o.GameState={})),function(t){t[t.BaoZi=1]="BaoZi",t[t.TangYuan=2]="TangYuan",t[t.ShaoMai=3]="ShaoMai",t[t.NiuNai=4]="NiuNai",t[t.WoWoTou=5]="WoWoTou",t[t.MianBao=6]="MianBao",t[t.JiDan=7]="JiDan",t[t.MianTiao=8]="MianTiao"}(o.EFoodType||(o.EFoodType={})),function(t){t[t.None=0]="None",t[t.Props_Boom=1]="Props_Boom",t[t.Props_Change=2]="Props_Change"}(i=o.EPropsType||(o.EPropsType={})),function(t){t[t.TopLeftToBottomRight=0]="TopLeftToBottomRight"}(o.EEnterAnim||(o.EEnterAnim={})),function(t){t[t.Simple=0]="Simple",t[t.Normal=1]="Normal",t[t.Hard=2]="Hard",t[t.Hell=3]="Hell",t[t.Hell_1=4]="Hell_1",t[t.Hell_2=5]="Hell_2",t[t.Hell_3=6]="Hell_3",t[t.Hell_4=7]="Hell_4",t[t.Hell_5=8]="Hell_5",t[t.Hell_6=9]="Hell_6",t[t.Hell_7=10]="Hell_7",t[t.Hell_8=11]="Hell_8",t[t.Hell_9=12]="Hell_9"}(o.EGameDiff||(o.EGameDiff={}));var l=function(){function t(){}return t.InitEventName=function(){for(var t in a)a[t]=t.toLowerCase()},t.GameConfigID="LAIGEBAOZI_GAME_CACHE",t.PlayerConfigID="playerInfo",t.UIPage={startUI:"startUI",loginUI:"loginUI",gameUI:"gameUI",shopUI:"shopUI",resultUI:"resultUI",messageUI:"messageUI"},t.ObjZIndex={gridBg:5,food:10,choseBox:50,particle:60,gameUI:100},t.buildType=r.WEB,t.ColorHexStringArr=["#FA8A8A","#8AC9FA","#A0FA8A","#FADF8A"],t.diffUpCheckLv=[4,8,12,16,20,24,28,32,36,40,44,48,52],t.gridUseColRangeArr=[cc.v2(3,6),cc.v2(2,7),cc.v2(1,8),cc.v2(1,8)],t.gridUseRowRangeArr=[cc.v2(4,7),cc.v2(3,8),cc.v2(2,9),cc.v2(1,10)],t.GameTimeLimitArr=[180,150,140,130,120,110,100,90,80,70,60],t.GameTimeAward=30,t.Props_Info=new Map([[i.Props_Boom,"\u6d88\u9664\u70b8\u5f39\uff1a\u6d88\u9664\u4efb\u610f\u4e24\u4e2a\u5b8c\u5168\u76f8\u540c\u7684\u683c\u5b50"],[i.Props_Change,"\u4ea4\u6362\uff1a\u4ea4\u6362\u4efb\u610f\u4e24\u4e2a\u683c\u5b50\u7684\u4f4d\u7f6e"]]),n([s("Constants")],t)}();o.default=l,cc._RF.pop()},{}],DrawLineUtils:[function(t,e,o){"use strict";cc._RF.push(e,"2f43eSEun5F4ILve0ONV0qO","DrawLineUtils");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function t(){}return t.InitGraphics=function(t){this.graphics||(this.graphics=t||cc.find("Canvas").addComponent(cc.Graphics),this.graphics.lineWidth=this.lineWidth,this.graphics.strokeColor=this.lineColor)},t.DrawLine=function(t,e,o){void 0===o&&(o=!0),this.canDrawLine&&(o&&this.Clear(),this.path=[],this.path.push(t),this.path.push(e),this.graphics.moveTo(t.x,t.y),this.graphics.lineTo(e.x,e.y),this.graphics.stroke())},t.DrawPath=function(t,e){if(void 0===e&&(e=!0),this.canDrawLine){e&&this.Clear(),this.path=t,this.graphics.moveTo(t[0].x,t[0].y);for(var o=1;o<t.length;o++)this.graphics.lineTo(t[o].x,t[o].y);this.graphics.stroke()}},t.Clear=function(){this.graphics&&this.graphics.clear()},t.SetColor=function(t,e,o,n){this.graphics.strokeColor=new cc.Color(t,e,o,n),this.graphics.stroke()},t.LineFadeOut=function(){var t=this,e=255,o=setInterval(function(){e-=2,t.graphics.strokeColor.setA(e),t.DrawPath(t.path),e<=0&&(clearInterval(o),t.Clear())},.0016)},t.graphics=null,t.canDrawLine=!0,t.lineWidth=10,t.lineColor=(new cc.Color).fromHEX("#2EFF00"),t.path=[],n([a],t)}());o.default=i,cc._RF.pop()},{}],EffectManager:[function(t,e,o){"use strict";cc._RF.push(e,"68acaFal1FMGYppGrGkPMad","EffectManager");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function t(){}return t.NodeFadeToTween=function(t,e,o,n,r){void 0===r&&(r="smooth"),cc.tween(t).to(e,{opacity:o},{easing:r}).call(function(){n&&n()}).start()},t.NodeScaleToTween=function(t,e,o,n,r,a){void 0===r&&(r="smooth"),void 0===a&&(a="smooth");var i=t.scaleX;cc.tween(t).to(e/2,{scale:o},{easing:r}).to(e/2,{scale:i},{easing:a}).call(function(){n&&n()}).start()},t.NodeScaleXYToTween=function(t,e,o,n,r,a,i){void 0===a&&(a="smooth"),void 0===i&&(i="smooth");var c=t.scaleX,s=t.scaleY;cc.tween(t).to(e/2,{scaleX:o,scaleY:n},{easing:a}).to(e/2,{scaleX:c,scaleY:s},{easing:i}).call(function(){r&&r()}).start()},t.NodeColorToTween=function(t,e,o,n,r,a){void 0===r&&(r="smooth"),void 0===a&&(a="smooth");var i=t.color;cc.tween(t).to(e/2,{color:o},{easing:r}).to(e/2,{color:i},{easing:a}).call(function(){n&&n()}).start()},t.NodeScaleAndColorToTween=function(t,e,o,n){var r=t.scaleX,a=t.color;cc.tween(t).to(e/2,{scale:o,color:n}).to(e/2,{scale:r,color:a}).start()},t.LabelAnim=function(t,e,o,n,r){if(void 0===n&&(n=30),r=r||parseInt(t.string),e!=r){cc.Tween.stopAllByTarget(t.node);var a=0,i=Math.abs(e-r),c=r>e?-1:1;Math.abs(e-r)>n&&(i=n,c*=Math.abs(e-r)/n),cc.tween(t.node).call(function(){a>=i-1?t.string=e.toString():(r+=Math.floor(c),t.string=Math.floor(r).toString()),a++}).delay(.02).union().repeat(i).call(function(){o&&o()}).start()}},n([a],t)}());o.default=i,cc._RF.pop()},{}],EventManager:[function(t,e,o){"use strict";cc._RF.push(e,"39111M0tttCtJeCEdIGFSWd","EventManager");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function t(){}return t.on=function(t,e,o){this.handle[t]||(this.handle[t]=[]);var n={func:e,target:o};this.handle[t].push(n)},t.off=function(t,e,o){var n=this.handle[t];if(n&&!(n.length<=0))for(var r=0;r<n.length;r++){var a=n[r];if(a.func===e&&(!o||o===a.target)){n.splice(r,1);break}}},t.dispatch=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=this.handle[t];if(n&&!(n.length<=0))for(var r=0;r<n.length;r++){var a=n[r];a.func.apply(a.target,e)}},t.handle={},n([a],t)}());o.default=i,cc._RF.pop()},{}],Food:[function(t,e,o){"use strict";cc._RF.push(e,"f5f7f0C1o5DFq4UpxiPuIqh","Food");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Tools/Tools"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){},e.prototype.Init=function(t){this.type=t,i.Tools.Utils.SetSpriteFrame(this.node,"food"+t)},a([s],e)}(cc.Component));o.default=l,cc._RF.pop()},{"../Tools/Tools":"Tools"}],GameConfig:[function(t,e,o){"use strict";cc._RF.push(e,"10e22TrXf1PLJXkoNSPyEN8","GameConfig");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function t(){}return t.goldEnable=!1,n([a],t)}());o.default=i,cc._RF.pop()},{}],GameData:[function(t,e,o){"use strict";cc._RF.push(e,"387e32taRxJTIV7zgqQc5lo","GameData");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerData=void 0;var r=t("./Configuration"),a=t("./Constants"),i=cc._decorator,c=i.ccclass,s=(i.property,function(){function t(){this.playerData=null,this.playerData=l.Instance}var e;return e=t,Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"guideState",{get:function(){return this.playerData.playerInfo.guideState},set:function(t){this.playerData.playerInfo.guideState=t,this.playerData.savePlayerInfoToCache()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shakeSet",{get:function(){return this.playerData.playerInfo.shakeSet},set:function(t){this.playerData.playerInfo.shakeSet=t,this.playerData.savePlayerInfoToCache()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"musicSet",{get:function(){return this.playerData.playerInfo.musicSet},set:function(t){this.playerData.playerInfo.musicSet=t,this.playerData.savePlayerInfoToCache()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"money",{get:function(){return this.playerData.playerInfo.money},set:function(t){this.playerData.playerInfo.money=t,this.playerData.savePlayerInfoToCache()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownSkin",{get:function(){return this.playerData.playerInfo.ownSkin},enumerable:!1,configurable:!0}),t.prototype.addSkin=function(t){-1==this.playerData.playerInfo.ownSkin.indexOf(t)&&this.playerData.playerInfo.ownSkin.push(t),this.playerData.savePlayerInfoToCache()},Object.defineProperty(t.prototype,"curSkin",{get:function(){return this.playerData.playerInfo.curSkin},set:function(t){this.playerData.playerInfo.curSkin=t,this.playerData.savePlayerInfoToCache()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLV",{get:function(){return this.playerData.playerInfo.curLV},set:function(t){this.playerData.playerInfo.curLV=t,this.playerData.savePlayerInfoToCache()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"props",{get:function(){return this.playerData.playerInfo.props},enumerable:!1,configurable:!0}),t.prototype.setProps=function(t,e){if(this.playerData.playerInfo.props.length>t)return this.playerData.playerInfo.props[t]=e,void this.playerData.savePlayerInfoToCache();for(var o=this.playerData.playerInfo.props.length;o<t;o++)this.playerData.playerInfo.props[o]=o==t?e:0;this.playerData.savePlayerInfoToCache()},t._instance=null,e=n([c("RunTimeData")],t)}());o.default=s;var l=function(){function t(){this.playerInfo={guideState:!1,shakeSet:!0,musicSet:!0,money:0,ownSkin:[0],curSkin:0,curLV:1,props:[]}}var e;return e=t,Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),t.prototype.loadFromCache=function(){var t=r.default.Instance.getConfigData(a.default.PlayerConfigID);t&&(a.default.buildType===a.BuildType.ZJ?this.playerInfo=t:this.playerInfo=JSON.parse(t))},t.prototype.savePlayerInfoToCache=function(){console.log(this.playerInfo),console.log(JSON.stringify(this.playerInfo)),r.default.Instance.setConfigData(a.default.PlayerConfigID,JSON.stringify(this.playerInfo))},t._instance=null,e=n([c("PlayerData")],t)}();o.PlayerData=l,cc._RF.pop()},{"./Configuration":"Configuration","./Constants":"Constants"}],GameManager:[function(t,e,o){"use strict";cc._RF.push(e,"5dba3TqPH1BNoG3Y62qysJ4","GameManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Data/Configuration"),c=t("../Data/Constants"),s=t("../Data/GameData"),l=t("../Data/Variables"),u=t("../DrawLine/DrawLineUtils"),p=t("./EventManager"),f=t("./LogManager"),d=t("./MapManager"),h=t("./PropsManager"),g=t("./UIManager"),_=cc._decorator,y=_.ccclass,v=_.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgRoot=null,e.mapRoot=null,e.uiRoot=null,e.MapManager=null,e.phyManager=null,e.collManager=null,e}return r(e,t),e.prototype.onLoad=function(){this.MapManager=this.mapRoot.getComponent(d.default),i.default.Instance.init(),s.PlayerData.Instance.loadFromCache(),l.default.GameManager=this;var t=Math.floor(s.default.Instance.curLV/4);l.default.gameDiff=t>12?12:t,u.default.InitGraphics(),c.default.InitEventName(),h.default.Instance.AddEventListen()},e.prototype.start=function(){this.gameInit(),this.AddEventListen()},e.prototype.phyColl=function(){this.phyManager=cc.director.getPhysicsManager(),this.phyManager.enabled=!0,this.phyManager.debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit,this.phyManager.debugDrawFlags=0,this.collManager=cc.director.getCollisionManager(),this.collManager.enabled=!0,this.collManager.enabledDebugDraw=!0},e.prototype.AddEventListen=function(){p.default.on(c.EventName.MainGame_Init,this.gameInit.bind(this),this),p.default.on(c.EventName.Game_Success,this.gameSuccess.bind(this),this),p.default.on(c.EventName.Game_Over,this.gameOver.bind(this),this)},e.prototype.gameInit=function(){l.default.gameState=c.GameState.GS_INIT,g.default.ShowDialog("gameUI",this.uiRoot),p.default.dispatch(c.EventName.GameUI_HideTimingBox),this.MapManager.loadMapData()},e.prototype.gameStart=function(){l.default.gameState=c.GameState.GS_PLAYING,this.MapManager.initMap(),p.default.dispatch(c.EventName.Game_Start)},e.prototype.gameEnd=function(){l.default.gameState!==c.GameState.GS_END&&(l.default.gameState=c.GameState.GS_END)},e.prototype.gameSuccess=function(){l.default.gameState!==c.GameState.GS_SUCCECC&&l.default.gameState!==c.GameState.GS_OVER&&(l.default.gameState=c.GameState.GS_SUCCECC,g.default.ShowDialog("resultUI",this.uiRoot),f.default.warn("\u6e38\u620f\u6210\u529f\uff0c\u8fdb\u5165\u4e0b\u4e00\u5173"))},e.prototype.gameOver=function(){l.default.gameState!==c.GameState.GS_SUCCECC&&l.default.gameState!==c.GameState.GS_OVER&&(l.default.gameState=c.GameState.GS_OVER,g.default.ShowDialog("resultUI",this.uiRoot),f.default.warn("\u6e38\u620f\u7ed3\u675f\uff0c\u662f\u5426\u8981\u7ee7\u7eed"))},a([v(cc.Node)],e.prototype,"bgRoot",void 0),a([v(cc.Node)],e.prototype,"mapRoot",void 0),a([v(cc.Node)],e.prototype,"uiRoot",void 0),a([y],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../Data/Configuration":"Configuration","../Data/Constants":"Constants","../Data/GameData":"GameData","../Data/Variables":"Variables","../DrawLine/DrawLineUtils":"DrawLineUtils","./EventManager":"EventManager","./LogManager":"LogManager","./MapManager":"MapManager","./PropsManager":"PropsManager","./UIManager":"UIManager"}],GameUI:[function(t,e,o){"use strict";cc._RF.push(e,"25f58SvhhBBMr9RW7KchNND","GameUI");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Config/GameConfig"),c=t("../Data/Constants"),s=t("../Data/GameData"),l=t("../Data/Variables"),u=t("../Manager/EffectManager"),p=t("../Manager/EventManager"),f=t("../Manager/LogManager"),d=t("../Manager/PoolManager"),h=t("../Manager/PropsManager"),g=t("../Manager/UIManager"),_=t("../Tools/Tools"),y=cc._decorator,v=y.ccclass,m=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_timeBox=null,e.node_colon=null,e.txt_timeMinute=null,e.txt_timeSecond=null,e.btn_boom=null,e.txt_boomNum=null,e.btn_change=null,e.txt_changeNum=null,e.txt_lv=null,e.btn_start=null,e.mask=null,e.node_goldBox=null,e.node_goldFrame=null,e.txt_goldNum=null,e._curTime=0,e._goldBoxWidth=0,e._needUpdateGoldBox=!1,e}return r(e,t),e.prototype.onLoad=function(){this.AddBtnEvent(),this.runtimeData=s.default.Instance},e.prototype.AddBtnEvent=function(){_.Tools.UIUtils.BtnAddClickEvent(this.btn_boom,this.node,"GameUI","PropsClickEvent",c.EPropsType.Props_Boom.toString()),_.Tools.UIUtils.BtnAddClickEvent(this.btn_change,this.node,"GameUI","PropsClickEvent",c.EPropsType.Props_Change.toString()),_.Tools.UIUtils.BtnAddClickEvent(this.btn_start,this.node,"GameUI","StartClickEvent")},e.prototype.start=function(){},e.prototype.Show=function(){this.AddEventListen(),this._curTime=c.default.GameTimeLimitArr[l.default.gameDiff>=c.default.GameTimeLimitArr.length?c.default.GameTimeLimitArr.length-1:l.default.gameDiff],i.default.goldEnable?(this.node_goldBox.active=!0,this.UpdateGoldBox()):this.node_goldBox.active=!1,this.SetLv(),this.SetTime(),this.SetPropsInfo()},e.prototype.Hide=function(){this.RemoveEventListen(),this.btn_start.interactable=!0,this.btn_start.node.setScale(1),this.btn_boom.node.getComponent(cc.Widget).updateAlignment(),this.btn_change.node.getComponent(cc.Widget).updateAlignment(),this.node.parent=null},e.prototype.AddEventListen=function(){p.default.on(c.EventName.Game_Start,this.TimeBoxEnable,this),i.default.goldEnable&&(p.default.on(c.EventName.Money_Change,this.MoneyChange,this),p.default.on(c.EventName.Show_GoldEffect,this.GoldEffect,this)),p.default.on(c.EventName.Mask_Size_Change,this.SetMaskSize,this),p.default.on(c.EventName.Mask_Show,this.MaskEnable,this),p.default.on(c.EventName.Mask_Hide,this.MaskDisEnable,this),p.default.on(c.EventName.Start_Timing,this.StartTiming,this),p.default.on(c.EventName.Game_Over,this.StopTiming,this),p.default.on(c.EventName.GameUI_HideTimingBox,this.TimeBoxDisEnable,this),p.default.on(c.EventName.Game_Success,this.StopTiming,this),p.default.on(c.EventName.ModifProps_Props_Num,this.SetPropsInfo,this)},e.prototype.RemoveEventListen=function(){p.default.off(c.EventName.Game_Start,this.TimeBoxEnable,this),i.default.goldEnable&&(p.default.off(c.EventName.Money_Change,this.MoneyChange,this),p.default.off(c.EventName.Show_GoldEffect,this.GoldEffect,this)),p.default.off(c.EventName.Mask_Size_Change,this.SetMaskSize,this),p.default.off(c.EventName.Mask_Show,this.MaskEnable,this),p.default.off(c.EventName.Mask_Hide,this.MaskDisEnable,this),p.default.off(c.EventName.Start_Timing,this.StartTiming,this),p.default.off(c.EventName.Game_Over,this.StopTiming,this),p.default.off(c.EventName.GameUI_HideTimingBox,this.TimeBoxDisEnable,this),p.default.off(c.EventName.Game_Success,this.StopTiming,this),p.default.off(c.EventName.ModifProps_Props_Num,this.SetPropsInfo,this)},e.prototype.SetLv=function(){this.txt_lv.string=this.runtimeData.curLV.toString()},e.prototype.TimeBoxEnable=function(){this.node_timeBox.active=!0},e.prototype.TimeBoxDisEnable=function(){this.node_timeBox.active=!1},e.prototype.StartTiming=function(){var t=this;cc.tween(this.node).delay(1).call(function(){t._curTime--,t.SetTime()}).union().repeatForever().tag(0).start()},e.prototype.StopTiming=function(){cc.Tween.stopAllByTag(0)},e.prototype.SetTime=function(){var t=Math.floor(this._curTime/60);this.txt_timeMinute.string=t>9?""+t:"0"+t;var e=this._curTime-60*t;this.txt_timeSecond.string=e>9?""+e:"0"+e,this._curTime<=10&&(u.default.NodeScaleToTween(this.node_timeBox,1,1.2),u.default.NodeColorToTween(this.txt_timeMinute.node,1,cc.Color.RED),u.default.NodeColorToTween(this.txt_timeSecond.node,1,cc.Color.RED),u.default.NodeColorToTween(this.node_colon,1,cc.Color.RED)),this._curTime<=0&&p.default.dispatch(c.EventName.Game_Over)},e.prototype.SetPropsInfo=function(){this.txt_boomNum.string=this.PropsCount(c.EPropsType.Props_Boom).toString(),this.txt_changeNum.string=this.PropsCount(c.EPropsType.Props_Change).toString()},e.prototype.IsDataHaveProps=function(t){return this.runtimeData.props.length>=t},e.prototype.PropsCount=function(t){var e=this.runtimeData.props[t-1];return null==e?0:e},e.prototype.PropsHandle=function(t){this.PropsCount(t)>0?p.default.dispatch(c.EventName.Use_Props):(this.MaskDisEnable(),g.default.ShowDialog("messageUI",l.default.GameManager.uiRoot))},e.prototype.StartClickEvent=function(){var t=this;l.default.gameState!=c.GameState.GS_PLAYING&&(this.btn_start.interactable=!1,_.Tools.UIUtils.MoveByUI(this.btn_boom.node,300,0,.3,"backOut",.3,function(){t.btn_boom.interactable=!0}),_.Tools.UIUtils.MoveByUI(this.btn_change.node,-300,0,.3,"backOut",.3,function(){t.btn_change.interactable=!0}),_.Tools.UIUtils.ScaleToUI(this.btn_start.node,0,.3,"backIn",0,function(){l.default.GameManager.gameStart()}))},e.prototype.PropsClickEvent=function(t,e){var o;switch(e){case"1":o=c.EPropsType.Props_Boom;break;case"2":o=c.EPropsType.Props_Change}h.default.Instance.curUsePropsTag!=o&&(h.default.Instance.curUsePropsTag=o,this.IsDataHaveProps(o)||this.runtimeData.setProps(o,0),this.PropsHandle(o))},e.prototype.MoneyChange=function(t){var e=this;this.runtimeData.money+=t,this._needUpdateGoldBox=!0,u.default.LabelAnim(this.txt_goldNum,this.runtimeData.money,function(){e._needUpdateGoldBox=!1})},e.prototype.Pop=function(){_.Tools.UIUtils.MoveByUI(this.node_goldBox,-this._goldBoxWidth/2-50,0,.3,"backIn")},e.prototype.UpdateGoldBox=function(){this.txt_goldNum.string=""+this.runtimeData.money,this._goldBoxWidth=this.txt_goldNum.node.width+50+40,this.node_goldFrame.width=this._goldBoxWidth,this.node_goldBox.x=cc.winSize.width/2-this._goldBoxWidth/2-100},e.prototype.GoldEffect=function(t){var e,o=_.Tools.Utils.GetRanIntNum(10,20);p.default.dispatch(c.EventName.Money_Change,o);for(var n=function(t){var e=d.default.Spawn("e_gold");e.parent=r.node.parent,e.setPosition(cc.Vec2.ZERO),e.opacity=255;var o=_.Tools.Utils.GetRanNum(10,400),n=_.Tools.Utils.GetRandomInCircle(cc.Vec2.ZERO,o);cc.tween(e).to(.3,{position:cc.v3(n.x,n.y,0)}).delay(.02*t).to(.2,{opacity:0}).call(function(){d.default.Despawn("e_gold",e)}).start()},r=this,a=0;a<o;a++)n(a);e=1.3+.02*o,this.scheduleOnce(function(){t&&t()},e)},e.prototype.SetMaskSize=function(t){this.mask.setContentSize(t)},e.prototype.MaskEnable=function(){f.default.log("\u5f00\u542f\u906e\u7f69"),this.mask.active=!0},e.prototype.MaskDisEnable=function(){this.mask.active&&(f.default.log("\u5173\u95ed\u906e\u7f69"),this.mask.active=!1,h.default.Instance.curUsePropsTag=c.EPropsType.None)},e.prototype.update=function(){this._needUpdateGoldBox&&this.UpdateGoldBox()},a([m(cc.Node)],e.prototype,"node_timeBox",void 0),a([m(cc.Node)],e.prototype,"node_colon",void 0),a([m(cc.Label)],e.prototype,"txt_timeMinute",void 0),a([m(cc.Label)],e.prototype,"txt_timeSecond",void 0),a([m(cc.Button)],e.prototype,"btn_boom",void 0),a([m(cc.Label)],e.prototype,"txt_boomNum",void 0),a([m(cc.Button)],e.prototype,"btn_change",void 0),a([m(cc.Label)],e.prototype,"txt_changeNum",void 0),a([m(cc.Label)],e.prototype,"txt_lv",void 0),a([m(cc.Button)],e.prototype,"btn_start",void 0),a([m(cc.Node)],e.prototype,"mask",void 0),a([m(cc.Node)],e.prototype,"node_goldBox",void 0),a([m(cc.Node)],e.prototype,"node_goldFrame",void 0),a([m(cc.Label)],e.prototype,"txt_goldNum",void 0),a([v],e)}(cc.Component);o.default=b,cc._RF.pop()},{"../Config/GameConfig":"GameConfig","../Data/Constants":"Constants","../Data/GameData":"GameData","../Data/Variables":"Variables","../Manager/EffectManager":"EffectManager","../Manager/EventManager":"EventManager","../Manager/LogManager":"LogManager","../Manager/PoolManager":"PoolManager","../Manager/PropsManager":"PropsManager","../Manager/UIManager":"UIManager","../Tools/Tools":"Tools"}],GridManager:[function(t,e,o){"use strict";cc._RF.push(e,"59cd03i+FFBL6Lw51AIojK2","GridManager");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.ESearchDir=void 0;var r,a=t("../Data/Constants"),i=(t("../Data/Variables"),t("../DrawLine/DrawLineUtils")),c=t("../Input/InputManager"),s=t("../Manager/EventManager"),l=t("../Manager/LogManager"),u=t("../Tools/Tools"),p=t("./Grid"),f=cc._decorator,d=f.ccclass;f.property,function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT"}(r=o.ESearchDir||(o.ESearchDir={}));var h=function(){function t(){this.grid=[],this.gridList=[]}var e;return e=t,Object.defineProperty(t,"Instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),t.prototype.InitGrid=function(t,e,o,n,r){this._gridColCount=t,this._gridRowCount=e,this._gridSpacing=o,this._gridWidth=n,this._gridHeight=r;for(var a=cc.v2(-(t-1)/2*(n+o),-(e-1)/2*(r+o)),i=0;i<t;i++){for(var c=[],s=0;s<e;s++){var l=cc.v2(a.x+i*(n+o),a.y+s*(r+o)),u=this.AddGrid(i,s,l);this.gridList.push(u),c.push(u)}this.grid.push(c)}},t.prototype.AddGrid=function(t,e,o){return new p.default(t,e,o)},t.prototype.GetGridByWorldPos=function(t){for(var e=0;e<this._gridColCount;e++)for(var o=0;o<this._gridRowCount;o++){var n=this.grid[e][o],r=[cc.v2(n.position.x+this._gridWidth/2,n.position.y+this._gridHeight/2),cc.v2(n.position.x+this._gridWidth/2,n.position.y-this._gridHeight/2),cc.v2(n.position.x-this._gridWidth/2,n.position.y-this._gridHeight/2),cc.v2(n.position.x-this._gridWidth/2,n.position.y+this._gridHeight/2)];if(cc.Intersection.pointInPolygon(t,r))return n}return null},t.prototype.GetGridByNodePos=function(t){for(var e=0;e<this._gridColCount;e++)for(var o=0;o<this._gridRowCount;o++){var n=this.grid[e][o],r=[cc.v2(n.position.x+this._gridWidth/2,n.position.y+this._gridHeight/2),cc.v2(n.position.x+this._gridWidth/2,n.position.y-this._gridHeight/2),cc.v2(n.position.x-this._gridWidth/2,n.position.y-this._gridHeight/2),cc.v2(n.position.x-this._gridWidth/2,n.position.y+this._gridHeight/2)];if(cc.Intersection.pointInPolygon(t,r))return n}return null},t.prototype.GetGridByColRow=function(t,e){return this.grid[t][e]},t.prototype.GetRanEmptyGrid=function(t,e){var o,n,r,a=0;do{if(n=u.Tools.Utils.GetRanIntNum(t.x,t.y),r=u.Tools.Utils.GetRanIntNum(e.x,e.y),o=this.grid[n][r],++a>=500)return null}while(!o.isNull);return o},t.prototype.ResetOneGrid=function(t){t.gameObject=null,t.type1=null,t.type2=null,t.bg=null,t.isNull=!0,t.isResetGOPos=!1},t.prototype.GridFall=function(){for(var t=0;t<this._gridColCount;t++)for(var e=0;e<this._gridRowCount;e++){var o=this.grid[t][e];if(o.isWork&&o.isNull){var n=this.GetFirstExistGridByDir(o,r.UP);n&&!n.isNull&&(o.gameObject=n.gameObject,o.bg=n.bg,o.type1=n.type1,o.type2=n.type2,o.isNull=!1,o.isResetGOPos=!0,this.ResetOneGrid(n))}}this.ResetGridGOPos()},t.prototype.GetFirstExistGridByDir=function(t,e){var o=this.GetNextGridByDir(t,e);return o?(t.isWork&&o.isNull&&(o=this.GetFirstExistGridByDir(o,e)),o):null},t.prototype.GetNextGridByDir=function(t,e){switch(e){case r.UP:if(t.row<this._gridRowCount-1)return this.grid[t.col][t.row+1];break;case r.DOWN:if(t.row>0)return this.grid[t.col][t.row-1];break;case r.LEFT:if(t.col>0)return this.grid[t.col-1][t.row];break;case r.RIGHT:if(t.col<this._gridColCount-1)return this.grid[t.col+1][t.row]}return null},t.prototype.ResetGridGOPos=function(){for(var t=this,e=0;e<this._gridColCount;e++)for(var o=0;o<this._gridRowCount;o++){var n=this.grid[e][o];n.isWork&&n.isResetGOPos&&(n.isResetGOPos=!1,this.GOMoveTween(n.gameObject,n.position),this.GOMoveTween(n.bg,n.position))}setTimeout(function(){t.DeathDetect()?s.default.dispatch(a.EventName.Game_Over):c.default.Instance.InputEnable()},.3)},t.prototype.EnterAnim=function(t,e){var o,n,r,i,c,s,l,u,p,f,d;switch(t){case a.EEnterAnim.TopLeftToBottomRight:o=0,n=0,r=this._gridColCount,i=this._gridRowCount,c=!0,s=!0,l=1,u=1,p=0,f=0,d=this._gridRowCount*(this._gridSpacing+this._gridHeight)}for(var h=o;c?h<r:h>r;h+=l)for(var g=n;s?g<i:g>i;g+=u)(y=this.grid[h][g]).isNull||(y.gameObject.setPosition(cc.v2(y.position.x+f,y.position.y+d)),y.gameObject.opacity=p,y.bg.setPosition(cc.v2(y.position.x+f,y.position.y+d)),y.bg.opacity=p);var _=0;for(h=o;c?h<r:h>r;h+=l)for(g=n;s?g<i:g>i;g+=u){var y;(y=this.grid[h][g]).isNull||(this.GOFadeMoveTween(y.gameObject,y.position,255,_),this.GOFadeMoveTween(y.bg,y.position,255,_),_+=.002)}setTimeout(function(){e&&e()},_)},t.prototype.GOFadeMoveTween=function(t,e,o,n){void 0===n&&(n=0),cc.tween(t).delay(n).to(.3,{position:cc.v3(e.x,e.y,0),opacity:o},{easing:"backOut"}).start()},t.prototype.GOMoveTween=function(t,e,o){void 0===o&&(o=0),cc.tween(t).delay(o).to(.3,{position:cc.v3(e.x,e.y,0)}).start()},t.prototype.CanConnect=function(t,e,o){void 0===o&&(o=!1);var n=[];return this.HorizontalDetect(t,e)||this.VerticalDetect(t,e)?(o&&(n=[t.position,e.position],i.default.DrawPath(n)),!0):(this.TurnOnce(t,e,n),l.default.log("\u4e00\u6b21\u62d0\u89d2\u68c0\u6d4b\u7ed3\u679c",n),0!=n.length?(o&&i.default.DrawPath(n),!0):(this.TurnTwice(t,e,n),l.default.log("\u4e24\u6b21\u62d0\u89d2\u68c0\u6d4b\u7ed3\u679c",n),0!=n.length&&(o&&i.default.DrawPath(n),!0)))},t.prototype.HorizontalDetect=function(t,e){return t.row==e.row&&(t.col<e.col?this.RightDetect(t,e):this.RightDetect(e,t))},t.prototype.RightDetect=function(t,e){for(var o=t.col+1;o<e.col;o++)if(!this.grid[o][t.row].isNull)return!1;return!0},t.prototype.VerticalDetect=function(t,e){return t.col==e.col&&(t.row<e.row?this.UpDetect(t,e):this.UpDetect(e,t))},t.prototype.UpDetect=function(t,e){for(var o=t.row+1;o<e.row;o++)if(!this.grid[t.col][o].isNull)return!1;return!0},t.prototype.TurnOnce=function(t,e,o){var n=this.grid[e.col][t.row];if(n.isNull&&this.HorizontalDetect(t,n)&&this.VerticalDetect(n,e))return l.default.log("\u4e00\u6b21\u62d0\u89d2\u68c0\u6d4b\u6210\u529f\uff0c\u62d0\u70b9",n),o.push(t.position),o.push(n.position),void o.push(e.position);(n=this.grid[t.col][e.row]).isNull&&this.HorizontalDetect(n,e)&&this.VerticalDetect(t,n)&&(l.default.log("\u4e00\u6b21\u62d0\u89d2\u68c0\u6d4b\u6210\u529f\uff0c\u62d0\u70b9",n),o.push(t.position),o.push(n.position),o.push(e.position))},t.prototype.TurnTwice=function(t,e,o){var n=[];this.UpPath(t.col,t.row,n),this.DownPath(t.col,t.row,n),this.LeftPath(t.col,t.row,n),this.RightPath(t.col,t.row,n),l.default.log("\u4e24\u6b21\u62d0\u89d2\u5f85\u68c0\u6d4b\u62d0\u70b9",n);for(var r=0;r<n.length;r++){var a=this.grid[n[r].x][n[r].y],i=this.HorizontalDetect(t,a);if(i||(i=this.VerticalDetect(t,a)),i&&(this.TurnOnce(a,e,o),0!=o.length))return l.default.log("\u4e24\u6b21\u62d0\u89d2\u6210\u529f\uff0c\u9996\u6b21\u62d0\u70b9",a),void o.splice(0,0,t.position)}},t.prototype.UpPath=function(t,e,o){for(var n=e+1;n<this._gridRowCount;n++){if(!this.grid[t][n].isNull)return;o.push(cc.v2(t,n))}},t.prototype.DownPath=function(t,e,o){for(var n=e-1;n>-1;n--){if(!this.grid[t][n].isNull)return;o.push(cc.v2(t,n))}},t.prototype.LeftPath=function(t,e,o){for(var n=t-1;n>-1;n--){if(!this.grid[n][e].isNull)return;o.push(cc.v2(n,e))}},t.prototype.RightPath=function(t,e,o){for(var n=t+1;n<this._gridColCount;n++){if(!this.grid[n][e].isNull)return;o.push(cc.v2(n,e))}},t.prototype.IsNullGridArr=function(t){for(var e=0;e<t.length;e++)if(!t[e].isNull)return!1;return!0},t.prototype.DeathDetect=function(){for(var t=0;t<this.gridList.length;t++)for(var e=this.gridList[t],o=t+1;o<this.gridList.length;o++){var n=this.gridList[o];if(!e.isNull&&!n.isNull&&e.EqualType(n)&&this.CanConnect(e,n))return!1}return!0},t._instance=new e,n([d],t)}();o.default=h,cc._RF.pop()},{"../Data/Constants":"Constants","../Data/Variables":"Variables","../DrawLine/DrawLineUtils":"DrawLineUtils","../Input/InputManager":"InputManager","../Manager/EventManager":"EventManager","../Manager/LogManager":"LogManager","../Tools/Tools":"Tools","./Grid":"Grid"}],Grid:[function(t,e,o){"use strict";cc._RF.push(e,"a4ae2klpgxJgpYAC3CkZFN/","Grid"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t,e,o){this.col=t,this.row=e,this.isNull=!0,this.isWork=!1,this.position=o}return t.prototype.EqualType=function(t){return t.type1==this.type1&&t.type2==this.type2},t}();o.default=n,cc._RF.pop()},{}],InputBase:[function(t,e,o){"use strict";cc._RF.push(e,"223abXF3tZF57D2niNs6XQa","InputBase");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function t(){this._canInput=!1}return t.prototype.InputEnable=function(){this._canInput=!0},t.prototype.InputDisEnable=function(){this._canInput=!1},n([a],t)}());o.default=i,cc._RF.pop()},{}],InputManager:[function(t,e,o){"use strict";cc._RF.push(e,"128f9p9WhpFF5+2rzyKBOFK","InputManager");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.EInputType=void 0;var r,a=t("./KeyboardInput"),i=t("./TouchInput"),c=cc._decorator,s=c.ccclass;c.property,function(t){t[t.Touch=0]="Touch",t[t.Keyboard=1]="Keyboard"}(r=o.EInputType||(o.EInputType={}));var l=function(){function t(){}var e;return e=t,Object.defineProperty(t,"Instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},set:function(t){this._instance=t},enumerable:!1,configurable:!0}),t.prototype.RegisterInputEvent=function(t,e){switch(t){case r.Touch:this.input=new i.default(e);break;case r.Keyboard:this.input=new a.default}},t.prototype.InputEnable=function(){this.input&&this.input.InputEnable()},t.prototype.InputDisEnable=function(){this.input&&this.input.InputDisEnable()},t._instance=null,e=n([s],t)}();o.default=l,cc._RF.pop()},{"./KeyboardInput":"KeyboardInput","./TouchInput":"TouchInput"}],KeyboardInput:[function(t,e,o){"use strict";cc._RF.push(e,"85b1cgPEGZEB6EX1lWfpepP","KeyboardInput");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./InputBase"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return t.call(this)||this}return r(e,t),a([s],e)}(i.default));o.default=l,cc._RF.pop()},{"./InputBase":"InputBase"}],LoadTools:[function(t,e,o){"use strict";cc._RF.push(e,"0fa005P3rNLLZmKf5J8QRqm","LoadTools");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Manager/LogManager"),a=cc._decorator,i=a.ccclass,c=(a.property,function(){function t(){}return t.InitSpriteFrame=function(t){this.SpriteFrameMap.clear();for(var e=0;e<t.length;e++)this.SpriteFrameMap.set(t[e].name,t[e])},t.InitFont=function(t){this.FontMap.clear();for(var e=0;e<t.length;e++)this.FontMap.set(t[e].name,t[e])},t.loadScene=function(t,e){cc.director.preloadScene(t,function(){cc.director.loadScene(t,function(){e&&e()})})},t.GetSpriteFrame=function(t){if(this.SpriteFrameMap.has(t))return this.SpriteFrameMap.get(t);r.default.error("\u4e0d\u5b58\u5728\u8be5\u56fe\u7247\uff1a"+t)},t.GetFont=function(t){if(this.FontMap.has(t))return this.FontMap.get(t);r.default.error("\u4e0d\u5b58\u5728\u8be5\u5b57\u4f53\uff1a"+t)},t.SpriteFrameMap=new Map,t.FontMap=new Map,n([i("LoadTools")],t)}());o.default=c,cc._RF.pop()},{"../Manager/LogManager":"LogManager"}],LogManager:[function(t,e,o){"use strict";cc._RF.push(e,"6e2a4oTYYRKepwO8uh3kLTQ","LogManager");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function t(){}return t.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.DEBUG&&console.log.apply(console,t)},t.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.DEBUG&&console.warn.apply(console,t)},t.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.DEBUG&&console.error.apply(console,t)},t.DEBUG=!0,n([a("LogManager")],t)}());o.default=i,cc._RF.pop()},{}],MainUI:[function(t,e,o){"use strict";cc._RF.push(e,"9cb88b17s9GvKhhaPiVPB3A","MainUI");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return r(e,t),e.prototype.start=function(){},a([s(cc.Label)],e.prototype,"label",void 0),a([s],e.prototype,"text",void 0),a([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],MapManager:[function(t,e,o){"use strict";cc._RF.push(e,"3d75a16e4BNBadehWh1m58H","MapManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Data/Constants"),c=t("../Data/Variables"),s=t("../DrawLine/DrawLineUtils"),l=t("../Game/Food"),u=t("../Grid/GridManager"),p=t("../Input/InputManager"),f=t("../Tools/Tools"),d=t("./EffectManager"),h=t("./EventManager"),g=t("./LogManager"),_=t("./PoolManager"),y=t("./PropsManager"),v=cc._decorator,m=v.ccclass,b=(v.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._mapTotalGridCol=10,e._mapTotalGridRow=12,e._gridColRange=new cc.Vec2,e._gridRowRange=new cc.Vec2,e._gridSpacing=5,e._gridSize=100,e.isFirstEliminate=!0,e.foodArr=[],e.choseBox=null,e.curChoseGrid=null,e}return r(e,t),e.prototype.onLoad=function(){p.default.Instance.RegisterInputEvent(p.EInputType.Touch,this.node),this.createChoseBox(),u.default.Instance.InitGrid(this._mapTotalGridCol,this._mapTotalGridRow,this._gridSpacing,this._gridSize,this._gridSize)},e.prototype.start=function(){h.default.on(i.EventName.Clear_Map,this.clearMap.bind(this),this)},e.prototype.loadMapData=function(){this.isFirstEliminate=!0;var t=c.default.gameDiff>i.EGameDiff.Hell?3:c.default.gameDiff;this._gridColRange=i.default.gridUseColRangeArr[t],this._gridRowRange=i.default.gridUseRowRangeArr[t];var e=this._gridColRange.y-this._gridColRange.x+1,o=this._gridRowRange.y-this._gridRowRange.x+1;this._gridCount=e*o,h.default.dispatch(i.EventName.Mask_Size_Change,cc.size(e*(this._gridSize+this._gridSpacing),o*(this._gridSize+this._gridSpacing))),c.default.one_round_collected_gold_count=0},e.prototype.initMap=function(){for(var t=2+c.default.gameDiff>8?8:2+c.default.gameDiff,e=Math.ceil(this._gridCount/t),o=[0,0,0,0,0,0,0,0],n=function(){for(var n=f.Tools.Utils.GetRanIntNum(1,t);o[n-1]>=e;)n=f.Tools.Utils.GetRanIntNum(1,t);return o[n-1]+=2,n},r=0;r<this._gridCount/2;r++)for(var a=n(),i=f.Tools.Utils.GetRanIntNum(0,c.default.gameDiff>3?3:c.default.gameDiff),s=0;s<2;s++){var l=u.default.Instance.GetRanEmptyGrid(this._gridColRange,this._gridRowRange),p=this.createFood(a,l.position),d=this.createGridBg(i,l.position);l.isNull=!1,l.isWork=!0,l.gameObject=p,l.bg=d,l.type1=a,l.type2=i}this.initAnim()},e.prototype.createFood=function(t,e){var o=_.default.Spawn("food");return this.node.addChild(o,i.default.ObjZIndex.food),o.setPosition(e),o.getComponent(l.default).Init(t),this.foodArr.push(o),o},e.prototype.createGridBg=function(t,e){var o=f.Tools.Utils.GetEmptySpriteNode(this.node,i.default.ObjZIndex.gridBg);return f.Tools.Utils.SetSpriteFrame(o,"gridBg"),f.Tools.Utils.SetColor(o,i.default.ColorHexStringArr[t]),o.setPosition(e),o},e.prototype.createChoseBox=function(){this.choseBox=_.default.Spawn("choseBox"),this.node.addChild(this.choseBox,i.default.ObjZIndex.choseBox),this.choseBox.active=!1},e.prototype.initAnim=function(){u.default.Instance.EnterAnim(i.EEnterAnim.TopLeftToBottomRight,function(){p.default.Instance.InputEnable()})},e.prototype.choseGrid=function(t){if(g.default.log("\u89e6\u6478\u683c\u5b50\u4fe1\u606f\uff1a",t),this.curChoseGrid){if(this.curChoseGrid==t)return this.curChoseGrid=null,void this.choseDisEnable();if(this.curChoseGrid!=t){var e=function(){h.default.dispatch(i.EventName.ModifProps_Props_Num,-1),h.default.dispatch(i.EventName.Mask_Hide)};this.curChoseGrid.EqualType(t)?y.default.Instance.curUsePropsTag==i.EPropsType.Props_Boom?(this.eliminateFood(this.curChoseGrid,t,!1),e()):u.default.Instance.CanConnect(this.curChoseGrid,t,!0)?this.eliminateFood(this.curChoseGrid,t):this.curChoseGrid=t:y.default.Instance.curUsePropsTag==i.EPropsType.Props_Change?(this.changeGridData(this.curChoseGrid,t),e()):this.curChoseGrid=t}else this.curChoseGrid=t}else this.curChoseGrid=t;this.choseEnable()},e.prototype.choseEnable=function(){this.curChoseGrid?(this.choseBox.setPosition(this.curChoseGrid.position),this.choseBox.setScale(1),this.choseBox.active=!0,cc.tween(this.choseBox).to(.5,{scale:1.1}).to(.5,{scale:1}).union().repeatForever().start()):this.choseDisEnable()},e.prototype.choseDisEnable=function(){cc.Tween.stopAllByTarget(this.choseBox),this.choseBox.active=!1},e.prototype.eliminateFood=function(t,e,o){var n=this;void 0===o&&(o=!0),p.default.Instance.InputDisEnable(),this.isFirstEliminate&&(this.isFirstEliminate=!1,h.default.dispatch(i.EventName.Start_Timing));var r=t.gameObject,a=t.bg,l=e.gameObject,f=e.bg;this.foodArr.splice(this.foodArr.indexOf(r),1),this.foodArr.splice(this.foodArr.indexOf(l),1),u.default.Instance.ResetOneGrid(t),u.default.Instance.ResetOneGrid(e),d.default.NodeFadeToTween(r,.5,0,function(){_.default.Despawn("food",r),n.foodArr.length<=0?h.default.dispatch(i.EventName.Game_Success):u.default.Instance.GridFall()},"backOut"),d.default.NodeFadeToTween(l,.5,0,function(){_.default.Despawn("food",l)},"backOut"),d.default.NodeFadeToTween(a,.5,0,function(){_.default.Despawn("emptySpriteNode",a)},"backOut"),d.default.NodeFadeToTween(f,.5,0,function(){_.default.Despawn("emptySpriteNode",f)},"backOut"),o&&s.default.LineFadeOut(46,255,0),c.default.one_round_collected_gold_count++,this.curChoseGrid=null},e.prototype.changeGridData=function(t,e){var o=t.gameObject,n=t.bg,r=t.type1,a=t.type2;t.gameObject=e.gameObject,t.bg=e.bg,t.type1=e.type1,t.type2=e.type2,t.gameObject.setPosition(t.position),t.bg.setPosition(t.position),e.gameObject=o,e.bg=n,e.type1=r,e.type2=a,e.gameObject.setPosition(e.position),e.bg.setPosition(e.position),this.curChoseGrid=null},e.prototype.clearMap=function(){for(var t=0;t<this.foodArr.length;t++){var e=this.foodArr[t],o=u.default.Instance.GetGridByNodePos(e.getPosition()),n=o.bg;this.foodArr.splice(t,1),_.default.Despawn("food",e),_.default.Despawn("emptySpriteNode",n),t--,u.default.Instance.ResetOneGrid(o)}},e.prototype.update=function(){},a([m],e)}(cc.Component));o.default=b,cc._RF.pop()},{"../Data/Constants":"Constants","../Data/Variables":"Variables","../DrawLine/DrawLineUtils":"DrawLineUtils","../Game/Food":"Food","../Grid/GridManager":"GridManager","../Input/InputManager":"InputManager","../Tools/Tools":"Tools","./EffectManager":"EffectManager","./EventManager":"EventManager","./LogManager":"LogManager","./PoolManager":"PoolManager","./PropsManager":"PropsManager"}],MessageUI:[function(t,e,o){"use strict";cc._RF.push(e,"4f6bdWyhYNNupQGOa3Dym0Y","MessageUI");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Data/Constants"),c=t("../Data/GameData"),s=t("../Manager/EventManager"),l=t("../Manager/PropsManager"),u=t("../Manager/UIManager"),p=t("../Tools/Tools"),f=cc._decorator,d=f.ccclass,h=f.property,g=function(t){function e(){var e=t.call(this)||this;return e.btn_self=null,e.box_message=null,e.txt_info=null,e.btn_left=null,e.btn_close=null,e.btn_right=null,e}var o;return r(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.AddBtnEvent(),this.AddEventListen(),this.runtimeData=c.default.Instance},e.prototype.AddBtnEvent=function(){p.Tools.UIUtils.BtnAddClickEvent(this.btn_self,this.node,"MessageUI","CloseClickEvent"),p.Tools.UIUtils.BtnAddClickEvent(this.btn_left,this.node,"MessageUI","LeftClickEvent"),p.Tools.UIUtils.BtnAddClickEvent(this.btn_close,this.node,"MessageUI","CloseClickEvent"),p.Tools.UIUtils.BtnAddClickEvent(this.btn_right,this.node,"MessageUI","RightClickEvent")},e.prototype.AddEventListen=function(){},e.prototype.Show=function(){var t=this;this.SetInfo(i.default.Props_Info.get(l.default.Instance.curUsePropsTag)),p.Tools.UIUtils.ScaleToUI(this.box_message,1,.3,"backOut",0,function(){t.AllBtnEnable()})},e.prototype.Hide=function(){var t=this;p.Tools.UIUtils.ScaleToUI(this.box_message,0,.3,"backIn",0,function(){t.node.parent=null})},e.prototype.AllBtnEnable=function(){this.btn_self.interactable=!0,this.btn_left.interactable=!0,this.btn_close.interactable=!0,this.btn_right.interactable=!0},e.prototype.AllBtnDisEnable=function(){this.btn_self.interactable=!1,this.btn_left.interactable=!1,this.btn_close.interactable=!1,this.btn_right.interactable=!1},e.prototype.SetInfo=function(t){this.txt_info.string=t},e.prototype.CloseClickEvent=function(){this.AllBtnDisEnable(),l.default.Instance.curUsePropsTag=i.EPropsType.None,u.default.HideDialog("messageUI")},e.prototype.LeftClickEvent=function(){this.runtimeData.money>=500?(s.default.dispatch(i.EventName.Money_Change,-500),this.AddProps()):console.log("\u91d1\u5e01\u4e0d\u8db3")},e.prototype.RightClickEvent=function(){var t=this;s.default.dispatch(i.EventName.Show_AD,function(){t.AddProps()})},e.prototype.AddProps=function(){s.default.dispatch(i.EventName.ModifProps_Props_Num,1),l.default.Instance.curUsePropsTag=i.EPropsType.None,u.default.HideDialog("messageUI")},e._instance=new o,a([h(cc.Button)],e.prototype,"btn_self",void 0),a([h(cc.Node)],e.prototype,"box_message",void 0),a([h(cc.Label)],e.prototype,"txt_info",void 0),a([h(cc.Button)],e.prototype,"btn_left",void 0),a([h(cc.Button)],e.prototype,"btn_close",void 0),a([h(cc.Button)],e.prototype,"btn_right",void 0),a([d],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../Data/Constants":"Constants","../Data/GameData":"GameData","../Manager/EventManager":"EventManager","../Manager/PropsManager":"PropsManager","../Manager/UIManager":"UIManager","../Tools/Tools":"Tools"}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"fabc3pyftxOCZ5ATl7eSvRI","Player");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Manager/AudioManager"),c=t("../Manager/LogManager"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.num=1,e}return r(e,t),e.prototype.onLoad=function(){c.default.log(111,this.node,222)},e.prototype.start=function(){var t=this;this.node.on("click",function(){1==t.num?(i.default.pauseMusic(),t.num=2):i.default.resumeMusic()},this)},a([l],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../Manager/AudioManager":"AudioManager","../Manager/LogManager":"LogManager"}],PoolManager:[function(t,e,o){"use strict";cc._RF.push(e,"e1225kw/FpLhKKeEcxqyuXB","PoolManager");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./LogManager"),a=cc._decorator,i=a.ccclass,c=(a.property,function(){function t(){}return t.InitPool=function(t){this.prefabHandle.clear(),this.poolHandle.clear();for(var e=0;e<t.length;e++){this.prefabHandle.set(t[e].name,t[e]),r.default.log("\u521b\u5efa\u4e86\u5bf9\u8c61\u6c60\uff1a"+t[e].name);var o=new cc.NodePool;this.poolHandle.set(t[e].name,o)}},t.PreLoad=function(t,e){if(this.prefabHandle.has(t))for(var o=this.poolHandle.get(t),n=0;n<e;n++){var a=cc.instantiate(this.prefabHandle.get(t));o.put(a)}else r.default.error("\u6ca1\u6709\u8be5\u9884\u5236\u4f53\uff1a"+t)},t.Spawn=function(t){if(this.prefabHandle.has(t)){var e=this.poolHandle.get(t),o=null;return e.size()>0?(o=e.get()).active=!0:o=cc.instantiate(this.prefabHandle.get(t)),o}r.default.error("\u6ca1\u6709\u8be5\u9884\u5236\u4f53\uff1a"+t)},t.Despawn=function(t,e){this.prefabHandle.has(t)?(e.stopAllActions(),e.active=!1,this.poolHandle.get(t).put(e)):r.default.error("\u6ca1\u6709\u8be5\u9884\u5236\u4f53\uff1a"+t)},t.prefabHandle=new Map,t.poolHandle=new Map,n([i],t)}());o.default=c,cc._RF.pop()},{"./LogManager":"LogManager"}],PropsManager:[function(t,e,o){"use strict";cc._RF.push(e,"ca091JB0YBGCKKywEM7kn73","PropsManager");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Data/Constants"),a=t("../Data/GameData"),i=t("./EventManager"),c=cc._decorator,s=c.ccclass,l=(c.property,function(){function t(){this.runtimeData=a.default.Instance,this.curUsePropsTag=r.EPropsType.None}var e;return e=t,Object.defineProperty(t,"Instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),t.prototype.AddEventListen=function(){i.default.on(r.EventName.Use_Props,this.UseProps.bind(this),this),i.default.on(r.EventName.ModifProps_Props_Num,this.ModifPropsNum.bind(this),this)},t.prototype.UseProps=function(){this.curUsePropsTag!=r.EPropsType.None&&i.default.dispatch(r.EventName.Mask_Show)},t.prototype.ModifPropsNum=function(t){var e=this.curUsePropsTag-1;t<=0&&this.runtimeData.props[e]<=0||this.runtimeData.setProps(e,this.runtimeData.props[e]+t)},t._instance=new e,n([s],t)}());o.default=l,cc._RF.pop()},{"../Data/Constants":"Constants","../Data/GameData":"GameData","./EventManager":"EventManager"}],ResManager:[function(t,e,o){"use strict";cc._RF.push(e,"de51aCVA/pMnZ7fOcsGw48g","ResManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Tools/LoadTools"),c=t("./AudioManager"),s=t("./PoolManager"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MusicSourceArr=[],e.SoundSourceArr=[],e.SpriteFrameArr=[],e.FontArr=[],e.PrefabArr=[],e}return r(e,t),e.prototype.onLoad=function(){c.default.InitMusic(this.MusicSourceArr),c.default.InitSound(this.SoundSourceArr),i.default.InitSpriteFrame(this.SpriteFrameArr),i.default.InitFont(this.FontArr),s.default.InitPool(this.PrefabArr)},a([p(cc.AudioClip)],e.prototype,"MusicSourceArr",void 0),a([p(cc.AudioClip)],e.prototype,"SoundSourceArr",void 0),a([p(cc.SpriteFrame)],e.prototype,"SpriteFrameArr",void 0),a([p(cc.Font)],e.prototype,"FontArr",void 0),a([p(cc.Prefab)],e.prototype,"PrefabArr",void 0),a([u],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../Tools/LoadTools":"LoadTools","./AudioManager":"AudioManager","./PoolManager":"PoolManager"}],ResultUI:[function(t,e,o){"use strict";cc._RF.push(e,"34e9aG2Y/dPu7drbWyZ8c/H","ResultUI");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Config/GameConfig"),c=t("../Data/Constants"),s=t("../Data/GameData"),l=t("../Data/Variables"),u=t("../Manager/EffectManager"),p=t("../Manager/EventManager"),f=t("../Manager/UIManager"),d=t("../Tools/Tools"),h=cc._decorator,g=h.ccclass,_=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txt_result=null,e.btn_restart=null,e.txt_awardNum=null,e.btn_doubleAD=null,e}return r(e,t),e.prototype.onLoad=function(){this.AddBtnEvent()},e.prototype.AddBtnEvent=function(){d.Tools.UIUtils.BtnAddClickEvent(this.btn_restart,this.node,"ResultUI","RestartClickEvent"),d.Tools.UIUtils.BtnAddClickEvent(this.btn_doubleAD,this.node,"ResultUI","DoubleClickEvent")},e.prototype.start=function(){},e.prototype.Show=function(){var t=this;this.AddEventListen(),this.InitPanel(),d.Tools.UIUtils.ScaleToUI(this.txt_result.node,1,.3,"backOut",0,function(){d.Tools.UIUtils.RepeatAlwaysScaleToUI(t.txt_result.node,1.2,.7);var e=function(){d.Tools.UIUtils.ScaleToUI(t.btn_restart.node,1,.3,"backOut",0,function(){t.btn_restart.interactable=!0,t.btn_doubleAD.interactable=!0})};i.default.goldEnable?(t.txt_awardNum.node.parent.active=!0,t.btn_doubleAD.node.parent.active=!0,u.default.LabelAnim(t.txt_awardNum,l.default.one_round_collected_gold_count,function(){d.Tools.UIUtils.ScaleToUI(t.btn_doubleAD.node,1,.3,"backOut",0,function(){e()})})):e()})},e.prototype.Hide=function(){this.RemoveEventListen(),this.node.parent=null},e.prototype.AddEventListen=function(){},e.prototype.RemoveEventListen=function(){},e.prototype.InitPanel=function(){this.txt_result.string=l.default.gameState==c.GameState.GS_SUCCECC?"\u606d\u559c\u8fc7\u5173":"\u5931\u8d25\uff0c\u8bf7\u91cd\u6765"},e.prototype.RestartClickEvent=function(){var t=this;i.default.goldEnable?p.default.dispatch(c.EventName.Show_GoldEffect,function(){t.NewGame()}):this.NewGame()},e.prototype.DoubleClickEvent=function(){},e.prototype.NewGame=function(){if(l.default.gameState==c.GameState.GS_SUCCECC){s.default.Instance.curLV++;var t=Math.floor(s.default.Instance.curLV/4);l.default.gameDiff=t>12?12:t}else p.default.dispatch(c.EventName.Clear_Map);f.default.HideDialog("gameUI"),f.default.HideDialog("resultUI",function(){p.default.dispatch(c.EventName.MainGame_Init)})},a([_(cc.Label)],e.prototype,"txt_result",void 0),a([_(cc.Button)],e.prototype,"btn_restart",void 0),a([_(cc.Label)],e.prototype,"txt_awardNum",void 0),a([_(cc.Button)],e.prototype,"btn_doubleAD",void 0),a([g],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../Config/GameConfig":"GameConfig","../Data/Constants":"Constants","../Data/GameData":"GameData","../Data/Variables":"Variables","../Manager/EffectManager":"EffectManager","../Manager/EventManager":"EventManager","../Manager/UIManager":"UIManager","../Tools/Tools":"Tools"}],ShopUI:[function(t,e,o){"use strict";cc._RF.push(e,"02993/RWUNITrQ9onVvzxIC","ShopUI");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.show=function(){},e.prototype.hide=function(){},a([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],StartGameScene:[function(t,e,o){"use strict";cc._RF.push(e,"96828Y5UGJChJTrktCL/uKa","StartGameScene");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Data/Configuration"),c=t("../Data/Constants"),s=t("../Data/GameData"),l=t("../Manager/UIManager"),u=t("../Tools/LoadTools"),p=t("./EventManager"),f=cc._decorator,d=f.ccclass,h=f.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgRoot=null,e.mapRoot=null,e.uiRoot=null,e._canClick=!0,e.runtimeData=null,e}return r(e,t),e.prototype.onLoad=function(){i.default.Instance.init(),s.PlayerData.Instance.loadFromCache(),this.runtimeData=s.default.Instance,this.AddEventListen()},e.prototype.start=function(){l.default.ShowDialog("startUI",this.uiRoot)},e.prototype.AddEventListen=function(){p.default.on(c.EventName.Scene_To_MainGame,this.enterMainGame.bind(this),this)},e.prototype.RemoveEventListen=function(){p.default.off(c.EventName.Scene_To_MainGame,this.enterMainGame.bind(this),this)},e.prototype.enterMainGame=function(){this._canClick&&(this._canClick=!1,this.RemoveEventListen(),l.default.HideDialog("startUI"),u.default.loadScene("MainGameScene",function(){p.default.dispatch(c.EventName.MainGame_Init)}))},e.prototype.setMusic=function(){this._canClick&&(this.runtimeData.musicSet?this.runtimeData.musicSet=!1:this.runtimeData.musicSet=!0)},e.prototype.setShake=function(){this._canClick&&(this.runtimeData.shakeSet?this.runtimeData.shakeSet=!1:this.runtimeData.shakeSet=!0)},e.prototype.openShop=function(){this._canClick&&(this._canClick=!1,l.default.ShowDialog("shopUI",this.uiRoot))},a([h(cc.Node)],e.prototype,"bgRoot",void 0),a([h(cc.Node)],e.prototype,"mapRoot",void 0),a([h(cc.Node)],e.prototype,"uiRoot",void 0),a([d],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../Data/Configuration":"Configuration","../Data/Constants":"Constants","../Data/GameData":"GameData","../Manager/UIManager":"UIManager","../Tools/LoadTools":"LoadTools","./EventManager":"EventManager"}],StartUI:[function(t,e,o){"use strict";cc._RF.push(e,"f08e9A6ZUZL65cwKnlDasMd","StartUI");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Data/Constants"),c=t("../Manager/EventManager"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_start=null,e._canClick=!0,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.Show=function(){this.AddEventListen(),this._canClick=!0},e.prototype.Hide=function(){this._canClick=!1,this.RemoveEventListen()},e.prototype.AddEventListen=function(){},e.prototype.RemoveEventListen=function(){},e.prototype.StartGame=function(){this._canClick&&(this._canClick=!1,this.btn_start.interactable=!1,c.default.dispatch(i.EventName.Scene_To_MainGame))},a([u(cc.Button)],e.prototype,"btn_start",void 0),a([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/Constants":"Constants","../Manager/EventManager":"EventManager"}],Tools:[function(t,e,o){"use strict";cc._RF.push(e,"e462b0weO1IlYluyYsM3XnJ","Tools"),Object.defineProperty(o,"__esModule",{value:!0}),o.Tools=void 0;var n=t("../Data/GameData"),r=t("../Manager/LogManager"),a=t("../Manager/PoolManager"),i=t("./LoadTools");(function(t){var e=function(){function t(){}return t.ConvertPosition=function(t,e,o){void 0===o&&(o=new cc.Vec2(0,0));var n=t.convertToWorldSpaceAR(o);return e.convertToNodeSpaceAR(n)},t.GetNodeDistance=function(t,e){if(t.parent===e.parent)return t.getPosition().sub(e.getPosition()).mag();var o=t.convertToWorldSpaceAR(new cc.Vec2(0,0));return e.parent.convertToNodeSpaceAR(o).sub(e.getPosition()).mag()},t.GetNodeDistanceSqr=function(t,e){if(t.parent===e.parent)return t.getPosition().sub(e.getPosition()).magSqr();var o=t.convertToWorldSpaceAR(new cc.Vec2(0,0));return e.parent.convertToNodeSpaceAR(o).sub(e.getPosition()).magSqr()},t.GetRandomVec2=function(t,e){return new cc.Vec2(this.GetRanNum(t.x,t.y),this.GetRanNum(e.x,e.y))},t.GetRandomInCircle=function(t,e){var o=cc.misc.degreesToRadians(this.GetRanNum(0,360)),n=e*Math.cos(o),r=e*Math.sin(o);return cc.v2(t.x+n,t.y+r)},t.GetRanIntNum=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t.GetRanNum=function(t,e){return Math.random()*(e-t)+t},t.GetRandomDir=function(){return this.GetRanNum(0,100)<50?1:-1},t.EqualVec2=function(t,e){return t&&e?t.x==e.x&&t.y==e.y:(r.default.error("\u8f93\u5165\u5750\u6807\u4e0d\u5b58\u5728!"),!1)},t.IsArray=function(t){return t.constructor.toString().indexOf("Array")>-1},t.Reverse=function(t,e,o){for(;e<o;){var n=t[e];t[e++]=t[o],t[o--]=n}},t.IndexOfV2=function(t,e){if(0===e.length||!t)return-1;for(var o=0;o<e.length;o++)if(this.EqualVec2(e[o],t))return o;return-1},t.GetEmptySpriteNode=function(t,e){void 0===e&&(e=0);var o=a.default.Spawn("emptySpriteNode");return t.addChild(o,e),o},t.SetSpriteFrame=function(t,e){if(null!=t){var o=t.getComponent(cc.Sprite);if(o||(o=t.getComponentInChildren(cc.Sprite)),!o)return void r.default.error("Sprite component can not find!");o.spriteFrame=i.default.GetSpriteFrame(e)}},t.SetColor=function(t,e,o,n,r,a){null!=t&&(t.color=e?(new cc.Color).fromHEX(e):new cc.Color(o,n,r,a))},t.VibrateLong=function(){n.default.Instance.shakeSet&&"vibrate"in window.navigator&&window.navigator.vibrate(400)},t.VibrateShort=function(){n.default.Instance.shakeSet&&"vibrate"in window.navigator&&window.navigator.vibrate(15)},t.isEven=function(t){return t%2==0},t.toFixed=function(t,e){return~~(Math.pow(10,e)*t)/Math.pow(10,e)},t.average=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(function(t,e){return t+e})/t.length},t}();t.Utils=e;var o=function(){function t(){}return t.BtnAddClickEvent=function(t,e,o,n,r){var a=new cc.Component.EventHandler;a.target=e,a.component=o,a.handler=n,r&&(a.customEventData=r),t.clickEvents.push(a)},t.MoveByUI=function(t,e,o,n,r,a,i){void 0===a&&(a=0),cc.tween(t).delay(a).by(n,{x:e,y:o},{easing:r}).call(function(){i&&i()}).start()},t.ScaleToUI=function(t,e,o,n,r,a){void 0===r&&(r=0),cc.tween(t).delay(r).to(o,{scale:e},{easing:n}).call(function(){a&&a()}).start()},t.RepeatAlwaysScaleToUI=function(t,e,o){var n=t.scaleX;cc.tween(t).to(o/2,{scale:e}).to(o/2,{scale:n}).union().repeatForever().start()},t}();t.UIUtils=o})(o.Tools||(o.Tools={})),cc._RF.pop()},{"../Data/GameData":"GameData","../Manager/LogManager":"LogManager","../Manager/PoolManager":"PoolManager","./LoadTools":"LoadTools"}],TouchInput:[function(t,e,o){"use strict";cc._RF.push(e,"55bcdlAsgJH4KaBUuLg7ZtD","TouchInput");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Data/Constants"),c=t("../Data/Variables"),s=t("../Grid/GridManager"),l=t("../Manager/EventManager"),u=t("../Manager/LogManager"),p=t("./InputBase"),f=cc._decorator,d=f.ccclass,h=(f.property,function(t){function e(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var n=t.call(this)||this;return n.binder=e[0],n.binder.on(cc.Node.EventType.TOUCH_START,n.touchStart,n),n}return r(e,t),e.prototype.touchStart=function(t){if(this._canInput){u.default.log("\u89e6\u6478\u5f00\u59cb...");var e=s.default.Instance.GetGridByWorldPos(this.binder.convertToNodeSpaceAR(t.getLocation()));e&&!e.isNull?c.default.GameManager.MapManager.choseGrid(e):l.default.dispatch(i.EventName.Mask_Hide)}},e.prototype.touchMove=function(){u.default.log("\u89e6\u6478\u79fb\u52a8...")},e.prototype.touchEnd=function(){u.default.log("\u89e6\u6478\u7ed3\u675f...")},e.prototype.touchCancle=function(){u.default.log("\u89e6\u6478\u53d6\u6d88...")},a([d],e)}(p.default));o.default=h,cc._RF.pop()},{"../Data/Constants":"Constants","../Data/Variables":"Variables","../Grid/GridManager":"GridManager","../Manager/EventManager":"EventManager","../Manager/LogManager":"LogManager","./InputBase":"InputBase"}],UIManager:[function(t,e,o){"use strict";cc._RF.push(e,"c2f43L//aNHlJ19Y5m+TVZN","UIManager");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./LogManager"),a=t("./PoolManager"),i=cc._decorator,c=i.ccclass,s=(i.property,function(){function t(){}return t.ShowDialog=function(t,e,o){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];var c=t.substring(0,1).toUpperCase()+t.substring(1);if(this._dictPanel.has(t)){r.default.log("\u6709\u7f13\u5b58\uff0c\u4ece\u7f13\u5b58\u4e2d\u53d6\u51fa"+t);var s=this._dictPanel.get(t);s.parent=e;var l=s.getComponent(c);l&&l.Show&&l.Show.apply(l,n);var u=s.getComponent(cc.Widget);return u&&(u.target=cc.director.getScene().getChildByName("Canvas")),void(o&&o())}r.default.log("\u6ca1\u6709\u7f13\u5b58\u9875\u9762\uff0c\u4ece\u5bf9\u8c61\u6c60\u4e2d\u53d6\u51fa"+t);var p=a.default.Spawn(t);this._dictPanel.set(t,p),p.parent=e;var f=p.getComponent(c);f&&f.Show&&f.Show.apply(f,n);var d=p.getComponent(cc.Widget);d&&(d.target=cc.director.getScene().getChildByName("Canvas")),o&&o()},t.HideDialog=function(t,e){if(this._dictPanel.has(t)){var o=t.substring(0,1).toUpperCase()+t.substring(1),n=this._dictPanel.get(t).getComponent(o);n&&n.Hide&&n.Hide.apply(n),e&&e()}},t._dictPanel=new Map,n([c("UIManager")],t)}());o.default=s,cc._RF.pop()},{"./LogManager":"LogManager","./PoolManager":"PoolManager"}],Variables:[function(t,e,o){"use strict";cc._RF.push(e,"38031OjNVpAK4C8L4R/u0gv","Variables");var n=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Constants"),a=cc._decorator,i=a.ccclass,c=(a.property,function(){function t(){}return t.gameState=r.GameState.GS_NOTINIT,t.GameManager=null,t.gameDiff=r.EGameDiff.Simple,t.one_round_collected_gold_count=0,n([i("Variables")],t)}());o.default=c,cc._RF.pop()},{"./Constants":"Constants"}]},{},["GameConfig","Configuration","Constants","GameData","Variables","DrawLineUtils","Food","Player","AStar","Grid","GridManager","InputBase","InputManager","KeyboardInput","TouchInput","ADManager","AudioManager","EffectManager","EventManager","GameManager","LogManager","MapManager","PoolManager","PropsManager","ResManager","StartGameScene","UIManager","GameUI","MainUI","MessageUI","ResultUI","ShopUI","StartUI","ArraySort","ArrayTools","LoadTools","Tools"]);